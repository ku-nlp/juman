\documentclass[a4j,titlepage]{jarticle}

\usepackage{ascmac}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\title{\bf 日本語形態素解析システム \\ JUMAN version 5.1}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\author{黒橋 禎夫 \ \ 河原 大輔}
\date{平成17年9月 \\
\rule{0mm}{110mm}Copyright \copyright\ 2005\begin{tabular}[t]{l}
                                東京大学大学院情報理工学系研究科 \\
                                \end{tabular}
}

\begin{document}

\maketitle

\thispagestyle{empty}

\vspace*{\fill}

\begin{small}
\noindent
Japanese Morphological Analysis System JUMAN 5.1 Users Manual

\noindent
Copyright (c) 2005 University of Tokyo \\
All rights reserved.

\noindent
Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions
are met:

\begin{enumerate}
 \item Redistributions of source code must retain the above copyright
   notice, this list of conditions and the following disclaimer.
 \item Redistributions in binary form must reproduce the above copyright
   notice, this list of conditions and the following disclaimer in the
   documentation and/or other materials provided with the distribution.
 \item The name University of Tokyo may not be used to endorse or promote
   products derived from this software without specific prior written
   permission.
\end{enumerate}

\noindent
THIS SOFTWARE IS PROVIDED BY University of Tokyo ``AS IS'' AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE University of Tokyo BE
LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
THE POSSIBILITY OF SUCH DAMAGE.


\vspace{1cm}

\begin{tabular}{ll}
Version 0.6 & 17 February 1992 \\
Version 0.8 & 14 April 1992 \\
Version 1.0 & 25 February 1993 \\
Version 2.0 & 11 July 1994 \\
Version 3.0b & 11 June 1996 \\
Version 3.0 & 16 October 1996 \\
Version 3.1 & 15 November 1996 \\
Version 3.11 & 5 December 1996 \\
Version 3.2 & 22 May 1997 \\
Version 3.3 & 5 September 1997 \\
Version 3.4 & 11 November 1997 \\
Version 3.5 & 23 March 1998 \\
Version 3.6 & 2 December 1998 \\
Version 3.61 & 26 May 1999 \\
Version 4.0 & 19 July 2003 \\
Version 5.0 & 23 March 2005 \\
Version 5.1 & 7 September 2005 \\
\end{tabular}
\end{small}

\clearpage

\pagenumbering{roman}
\tableofcontents

\clearpage
\pagenumbering{arabic}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{はじめに}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

計算機による日本語の解析において，欧米の言語の解析と比べてまず問題にな
るのが次の2点です．一つは形態素解析の問題です．ワードプロセッサの普及
などによって日本語の入力には大きな問題がなくなりましたが，計算機による
日本語解析では，まず入力文内の個々の形態素を認識する必要があります．こ
れには実用に耐えられるだけの大きな辞書も必要であり，これを如何に整備す
るかという問題も同時に存在します．もう一つの問題として，日本語には広く
認められ同意を得られた文法，ないし，文法用語がないという現実です．学校
文法の単語分類および文法用語は一般には広く知られていますが，研究者の間
ではあまり評判がよくありませんし，計算機向きではありません．

日本語の解析に真っ先に必要な形態素解析システムは，多くの研究グループに
よって既に開発され技術的な問題が洗い出されているにも係わらず，共通のツー
ルとして世の中に流布しているものはありません．計算機可読な日本語辞書に
ついても同様です．

本システムは，計算機による日本語の解析の研究を目指す多くの研究者に共通
に使える形態素解析ツールを提供するために開発されました．その際，上の二
つ目の問題を考慮し，使用者によって文法の定義，単語間の接続関係の定義な
どを容易に変更できるように配慮しました．

本システムの辞書は，JUMAN2.0までのバージョンでは，長尾研究室で行われた
Muプロジェクトで開発された辞書，Wnnかな漢字変換システムの辞書，および，
ICOTから公開された日本語辞書を利用しました．また，JUMAN3.0以降のバージョ
ンでは，(株)日本電子化辞書研究所(EDR)から許諾を得てEDR日本語単語辞書の
一部を利用しています．

本システムの辞書は，JUMAN2.0までのバージョンでは，長尾研究室で行われたMu 
プロジェクトで開発された辞書，Wnnかな漢字変換システムの辞書，および，
ICOTから公開された日本語辞書を利用しました．また，JUMAN3.Xでは，(株)日本
電子化辞書研究所(EDR)から許諾を得てEDR日本語単語辞書の一部を利用しました．
また，JUMAN4.0以降のバージョンでは独自に構築した辞書を利用しています．

本システムの開発は京都大学長尾研究室を中心に，他の多くの機関の方々の協
力を得て行われました．長尾研究室の松本裕治先生(現 奈良先端大)には常に
開発の指導的役割をはたして頂きました．妙木裕さん(現 キヤノン)にはJUMAN
の初期バージョンを開発していただきました．米国MCCの自然言語グループの
方々にはJUMAN1.0でハッシングによる辞書引きの高速化を実現していただきま
した．SICStus Prologとのソケットによる接合部を東京工大の徳永健伸先生に
作成していただきました．また，富士通の中村俊久さんにはJUMAN2.0でndbmに
よる辞書のハッシュデータベース化を実現していただきました．長尾研究室の
山地治さんには連語処理をはじめとしたJUMAN3.0へのバージョンアップをして
いただきました．NTT基礎研の磯崎秀樹さんにはJUMAN3.4へのバージョンアッ
プに伴うSICStus Prologとの接合部の調整をしていただきました．また，
JUMAN3.1以降では奈良先端大松本研究室で開発された茶筅のパトリシア木によ
る辞書検索システムを利用させていただいています．また，JUMAN3.5でのサー
バ・クライアント方式への拡張は同じく茶筅を参考にさせていただき，その拡
張作業には学術情報センターの影浦峡先生，吉岡真治先生に多大なご協力頂き
ました．言語メディア研(旧長尾研)の工藤拓さんにはWindows版の作成とPerl
モジュール化をしていただきました．また、一人一人お名前を挙げることはで
きませんが、JUMANシステムに対して多くの方々からコメントと質問をいただ
きました．御協力頂いた各位にお礼申し上げます．

\begin{flushright}
平成 17年 8月
\end{flushright}

\vfill

\noindent
本システムに関するお問い合わせは以下にお願いします．

\noindent
〒113-8656 東京都文京区本郷 7-3-1 \\
東京大学大学院 情報理工学系研究科 電子情報学専攻 \\
黒橋 禎夫 \\
Tel: (03)5841-6672\\
Fax: (03)5841-6689\\
Email: {\sf nl-resource@kc.t.u-tokyo.ac.jp}

\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{日本語形態素文法}\label{s:jmg}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

本システムで仮定している日本語の形態素文法およびここで用いる用語につい
て説明する．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{形態品詞および品詞細分類}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\label{ss:jmg-h}

本システムでは形態素の集合の二階層の分類が仮定されている．これらの分類
を{\bf 形態品詞}および{\bf (形態)品詞細分類}と呼ぶ．

例えば，名詞を普通名詞，サ変名詞，固有名詞などに細分類することができる．
また，ある形態品詞を細分類したくない場合は細分類を指定しなくてもよい．
例えば，品詞細分類を持たない形態品詞として動詞を定義してもよい．

この二階層に分類されたそれぞれの集合を{\bf 品詞}と呼ぶ．上の例では，名
詞の細分類としての普通名詞，サ変名詞，固有名詞，および，動詞はそれぞれ
品詞である．

%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{活用型と活用形}
%%%%%%%%%%%%%%%%%%%%%%%%%%%
\label{ss:jmg-k}

学校文法における `動詞' `形容詞' `形容動詞' などのように，後接する形態
品詞に応じてその形態が変化する形態素が存在する．このような形態変化を 
{\bf 活用} (conjugation) という．このような形態素の表層のうち変化しな
い部分を {\bf (活用)語幹}，変化する部分を {\bf (活用)語尾}と呼ぶ．大部
分の活用は規則的である．その規則性に従って活用のタイプを分類し，これを 
{\bf 活用型}と呼ぶ．そして，連接に応じて実際にとり得る表層的な個々の形
態を {\bf 活用形}と呼ぶ．

%%%%%%%%%%%%%%%%%%%%%%%
\subsection{形態素構造}
%%%%%%%%%%%%%%%%%%%%%%%
\label{ss:jmg-ms}

形態素 $m$ の形態品詞，品詞細分類，活用型，活用形，表層形がそれぞれ 
$H1$, $H2$, $K1$, $K2$, $M$ であるとき，これを 5項組 $(H1\ H2\ K1\ K2\
M)$ によって表わし，「形態素 $m$ の {\bf 形態素構造}」と呼ぶ．

形態素構造の項 $H1, H2, K1, K2$ には，具体的な名称として，それぞれ形態
品詞名・品詞細分類名・活用型名・活用形名を与える．また，項 $M$ には，
漢字または仮名で表記される表層形を与える．各形態素構造の記述には特別な
シンボル `$\ast$' を使用することができる．`$\ast$' は，その項を考慮し
ない (未指定，`don't care') ことを表わす．形態素構造を表わすリストのあ
る要素以降がすべて未指定でよい場合は，形態品詞の部分以外はそれらを省略
してもよい．たとえば，形態素構造
\[ \alpha_{1} = (\ast) \]
は任意の形態素を表わす集合とみなすことができる．同様に，形態素構造
\[ \alpha_{2} = (\mbox{名詞}) \]
は `名詞'という形態品詞に分類されたすべての形態素の集合を表わす．また，
形態素構造
\[ \alpha_{3} = (\ast\ \ast\ \ast\ \mbox{未然形}) \]
は `未然形' という活用形を取るすべての形態素の集合を表わす
\footnote{
この例では，
\(\alpha_{1} \supseteq \alpha_{2}, \alpha_{1} \supseteq \alpha_{3}\)
という関係が成り立つ．
}．
また，
%\[ \alpha_{4} = ( 助詞\ 格助詞\ \ast\ \ast\ が ) \]
\[ \alpha_{4} = ( \mbox{助詞} \ \mbox{格助詞} \ast\ \ast\ \mbox{が} ) \]
のように具体的な形態素を指定することも許される
\footnote{この例ように，活用しない形態素に対しても5項組によって形態素
を表現する必要があり，表層形を指定する場合には活用型名，活用形名の部分を
$\ast$としなければならない．}．

この記法は次に述べる連接規則を記述する際に使われる．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{連接規則と連接関係}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\label{ss:jmg-c}

形態素構造の集合の組 $ A_{1} $ と $ A_{2} $ に含まれるそれぞれの要素が
文中に連続して現れ得るとき，それらは連接可能であるといい，それを記述し
た規則を{\bf 連接規則}と呼ぶ．また，連接規則によって定義される2項関係
を{\bf 連接関係}と呼ぶ．

連接規則は二種類の形態素の連接可能性が記述可能である．また，連接の強弱
に関するコストをそれぞれの連接規則に対して記述することができる．連接規
則は，次節で述べる連接規則辞書によって定義される．


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{辞書の定義とデータ構造}\label{s:jds}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%
\subsection{辞書の概要}
%%%%%%%%%%%%%%%%%%%%%%%
\label{ss:abst-dic}

本システムで用いる辞書の種類について述べる．本辞書システムの特徴は，利
用者によって形態品詞名や連接関係などの文法情報やを自由に定義できること
である．

日本語の形態素文法は，本システムに標準的に仮定されているファイルによっ
て定義されなければならないが，この定義はユーザに任されている．ユーザが
定義すべき辞書を総称して{\bf ユーザ辞書}と呼ぶ．ユーザ辞書は，{\bf 文
法辞書}と{\bf 形態素辞書}に大別される．文法辞書は \ref{s:jmg}~節で述べ
た日本語形態素文法を定義するための辞書で，{\bf 形態品詞分類辞書}，{\bf 
活用関係辞書}，{\bf 活用辞書}，{\bf 連接規則辞書}から構成される
(\ref{ss:jds-gd}~節)．形態素辞書は個々の形態素についての情報を実際に記
述する辞書である(\ref{ss:jds-md}~節)．

形態素解析において使用する辞書を{\bf システム辞書}と呼ぶ．システム辞書
は，連接規則辞書と活用関係辞書から生成された{\bf 連接対応表}と{\bf 連
接行列}，文法辞書を参照して形態素辞書に記述された情報を記号化した{\bf 
データベース辞書}と{\bf インデックスファイル}からなる．

ユーザ辞書およびシステム辞書を以下にまとめる．本システムには標準的なユー
ザ辞書が含まれているが，ユーザはこれを自由に書き直してよい．システム辞
書は，本システムによってユーザ辞書から自動的に生成されるので，ユーザは
これらを意識する必要はない．形態素解析プログラムは変換して得られたシス
テム辞書のみを用いる．

\vspace{.5\baselineskip}
\noindent
{\bf ユーザ辞書}

\vspace{1mm}
\noindent
\begin{tabular}{|l|l|p{8cm}|}\hline
辞書の種類      & 辞書名称(ファイル名)  & 説明 \\ \hline\hline
文法辞書
  & 形態品詞分類辞書({\tt JUMAN.grammar}) & 品詞分類を定義する\\
  & 活用関係辞書({\tt JUMAN.kankei})
        & 活用する各品詞に対して活用型の一覧を定義する\\
  & 活用辞書({\tt JUMAN.katuyou})
        & 個々の活用型の具体的な活用形の一覧を定義する\\
  & 連接規則辞書({\tt JUMAN.connect.c})
        & 連接関係を定義する連接規則の集合\\ \hline
形態素辞書
  & {\tt ContentW.dic}など
        & 個々の形態素の定義(\ref{ss:jds-md}を参照)\\ \hline
\end{tabular}

\vspace{.5\baselineskip}
\noindent
{\bf システム辞書}

\vspace{1mm}
\noindent
\begin{tabular}{|l|l|p{55mm}|}\hline
辞書の種類      & 辞書名称(ファイル名)  & 説明 \\ \hline\hline
文法辞書        & 連接対応表({\tt jumandic.tab}) &
        形態品詞と接続番号との対応表\\
                & 連接行列({\tt jumandic.mat}) &
        接続可能性表 \\ \hline
形態素辞書      & データベース辞書({\tt jumandic.dat}) &
        各形態素の情報が格納される\\ 
        & インデックスファイル({\tt jumandic.pat}) &
        パトリシア木によるインデックス \\
        \hline
\end{tabular}
\vspace{.5\baselineskip}

本システムを使用する際に個人的にカスタマイズできる情報があり，その情報は，
使用者のホームディレクトリにある{\tt .jumanrc}というファイルで設定できる．
このファイルが存在しない場合は，システムの標準的な設定ファイルが使用され
る．設定ファイルに書かれる情報の詳細は後で詳しく述べる．

また，本システムでは標準的なユーザ辞書を用意している．これについては，
\ref{ss:jds-s_dict}~節で紹介する．

文法辞書および形態素辞書ファイルでは，各行中のセミコロン`{\tt ;}'で始
まる文字列はその行末までがコメントとみなされる．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{文法辞書の定義法}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\label{ss:jds-gd}

文法辞書の構成と内容は次のようになっている．各辞書の記述はS式によって
行う．付録\ref{app:jisho_rei}に記述のフォーマットをBNF式と例によって
示す．

\begin{enumerate}

\item\label{local:h_dict}
{\bf 形態品詞分類辞書：} (cf. {\tt JUMAN.grammar})

本システムで用いる形態品詞およびその品詞細分類の名称を定義する．一つの
形態品詞およびそれの品詞細分類を一つのS式(リスト構造)によって記述する．
リストの第1要素に形態品詞を記述し，品詞細分類があれば第2要素に品詞細分
類名をリストによって記述する．

個々の形態品詞と品詞細分類はリストの形で表現されるが，それに属する形態
素が活用する場合にはその第2要素として記号 {\tt \%} を付加する．形態品
詞が記号 {\tt \%} をもつ場合には，その細分類に属するすべての形態素が活
用するとみなされる．

バージョン3.4以降では未定義語も一つの品詞として扱い，その細分類として
「カタカナ」，「アルファベット」，「その他」をたてている．これらは形態
品詞分類辞書で必ず定義する必要がある(\ref{subsec:undef}節参照)．

形態品詞分類辞書の記法を付録\ref{app:grammar}に示す．

\item\label{local:r_dict}
{\bf 活用関係辞書：} (cf. {\tt JUMAN.kankei})

活用関係辞書は，形態品詞分類辞書によって活用すると定義された形態品詞ま
たは品詞細分類それぞれに対してそれが取り得る活用型の一覧を定義する．形
態品詞分類辞書で活用すると定義されたものに対しては，必ず取り得る活用型
の一覧が書かれていなければならない．活用型の名前付けはユーザが自由に行
なってよい．

個々の活用関係は，二つの要素からなるリストとして定義される．第一要素は
形態品詞のリストまたは形態品詞と品詞細分類からなるリストであり，活用す
る品詞を示す．第二要素はその品詞が取り得る活用型の一覧を示すリストであ
り，任意個数のアトムを含む．

活用関係辞書の記法を付録\ref{app:kankei}に示す．

\item\label{local:k_dict}
{\bf 活用辞書：} (cf. {\tt JUMAN.katuyou})

活用辞書は，活用関係辞書によって定義された個々の活用型に対して，それが
取り得る活用形の名前およびその活用語尾を定義する．

この辞書の各項目も二つの要素からなるリストであり，第1要素に活用型の名
前を記述し，第2要素として活用形の名前と活用語尾のリストより構成される
リストを記述する．この時，活用形の名前として「{\bf 基本形}」を必ず記述
しなければならない．後で述べる形態素辞書には，活用する形態素はその基本
形が登録されていると仮定されることになっているので，個々の形態素につい
ては，形態素辞書に登録された見出し表記からこの辞書で定義される基本形の
語尾を取り除いたものがその形態素の不変化部分であるとみなされる．活用語
尾の存在しない活用形(例えば，語幹)に対しては，活用語尾として $\ast$ と
記述すればよい．

また，不変化部分が存在しない活用語については，見出し語と基本形語尾が同
じになる(例えば，付録\ref{app:katuyou_rei}のサ変動詞型の活用)．このよ
うな場合には，システムはすべての活用語尾を個別の形態素として形態素辞書
に登録する．

活用辞書の記法を付録\ref{app:katuyou}に示す．

\item\label{local:c_dict}
{\bf 連接規則辞書：} (cf. {\tt JUMAN.connect})

連接規則辞書は連接規則の集合である．一つの連接規則は形態素構造
(\ref{ss:jmg-ms}節を参照)の集合の対であり，2要素のリストによって表現さ
れる．形態素構造の集合もリストによって表現される．連接規則には第3要素
として連接のコストを記述することができる．コストの指定がない場合のデフォ
ルト値は ``10'' である．コストの値は，0から255までの整数値でなければな
らない．ただし, 連接規則辞書から得られる連接行列では, 二つの形態素が連
接不可能であることを数値0によって表わしているので, 連接のコストを0と指
定することはそれらが連接不可能であることを意味する. したがって, 連接条
件の例外的な記述を連接コストを0にすることによって行うことができる.

一つの連接規則の第1要素に含まれる形態素は第2要素に含まれる形態素に連接
可能であることを示す．一つの形態素が複数の連接規則内の形態素構造に含ま
れることがあってもよい．連接関係はこれらの規則の和集合であるとみなされ
る．したがって，ある特定の形態素構造の対が連接可能であることが複数の連
接規則によって定義されることがある．このような場合，これらの連接のコス
トは，連接規則辞書内で後方に現れた規則によって指定されるコストを取ると
みなされる．

形態素構造で用いられる品詞名や活用形名は文法辞書で定義されたものでなけ
ればならない．例外として，{\tt (文頭)} および {\tt (文末)} という形態
素構造がある．前者は，文頭の直前に現れると考えられるダミーの形態品詞で
あり，少なくとも一つの連接規則の第1要素の中に現れなければならない．同
様に，後者は文末の直後に繋がると考えられるダミーの形態品詞であり，少な
くとも一つの連接規則の第2要素の中に現れる必要がある．

連接規則辞書の記法を付録\ref{app:connect}に示す．

連接規則においては，ある品詞のグループが同じ連接関係をもつことがよく起
こる．連接規則の記述を省力化するために，gccで用意されているマクロ機能
を利用することができる．{\tt JUMAN.connect.c}というファイルに次のよう
なマクロを定義することにより，以降の連接規則内で{\tt NormalNominal}と
いう記号を{\tt \#define}の第二引数と等価に扱うことができる．

\begin{verbatim}
#define NormalNominal (名詞 普通名詞) \
                      (名詞 サ変名詞) \
                      (名詞 固有名詞) \
                      (名詞 地名) \
                      (名詞 人名) \
                      (名詞 数詞) \
                      (指示詞 名詞形態指示詞) \
                      (動詞 * * 基本連用形)
\end{verbatim}

\end{enumerate}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{形態素辞書の記述法}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\label{ss:jds-md}

形態素辞書もリスト構造を用いて記述する．形態素辞書は，最後に`{\tt
dic}'という拡張子をもつファイルに格納する．形態素辞書は複数のファイル
に分割されていてもよい．

各形態素は，複数の見出し語を持ってもよい．また，それぞれの見出し語に対
してコスト計算のための相対的な重みを指定することができる．形態素のもつ
コストについては，\ref{kaiseki}章で説明する．複数の見出し語が記述され
ている場合，見出し語以外の形態素情報は共有される．

次に形態素辞書の形態素定義の記述方法をBNFで示す．

\begin{tt}
\begin{tabular}{lll}
〈形態素定義〉  &::=&(〈\#形態品詞名〉〈形態素情報の並び〉) |                \\
                &   &(〈\#形態品詞名〉(〈\#品詞細分類名〉〈形態素情報の並び〉))\\
〈形態素情報の並び〉&::=&〈形態素情報〉 | 〈形態素情報〉〈形態素情報の並び〉\\
〈形態素情報〉  &::=& (〈見出し語情報〉〈読み情報〉〈活用型情報〉〈意味情報〉)\\
〈見出し語情報〉&::=& (見出し語 〈見出し語内容の並び〉) \\
〈見出し語内容の並び〉&::=&〈見出し語内容〉 | 〈見出し語内容の並び〉\\
〈見出し語内容〉&::=& 〈\#見出し語表記〉 | (〈\#見出し語表記〉)  | \\
                &   &  (〈\#見出し語表記〉〈\#数値〉) \\
〈読み情報〉    &::=& (読み 〈\#読み表記〉) \\
〈活用型情報〉  &::=& (活用型 〈\#活用型名〉) | NIL \\
〈意味情報〉    &::=& (意味情報 〈\#意味記述〉) | NIL
\end{tabular}
\end{tt}

\begin{itemize}
\item
〈形態素情報〉は，共通の形態品詞名または品詞細分類名ごとにまとめて〈形
態素情報の並び〉として書くこともできるし，個別に記述してもよい．〈{\tt
\#}形態品詞名〉，〈{\tt \#}品詞細分類名〉は，「形態品詞分類辞書」で定
義されていなければならない．また，品詞細分類されている形態品詞に対して
は品詞細分類名を指定しなければならない．

\item
〈活用型情報〉は，〈{\tt \#}形態品詞名〉または〈{\tt \#}品詞細分類名〉
が活用すると定義されている時は省略できない．

\item
〈{\tt \#}見出し語内容〉は形態素の表層の形と相対的な重みを表わす数値の
対として表現する．相対的な重みが1の場合は，重みの記述を省略してもよい．
重みとして指定できるのは正整数または小数点1桁以内の正小数である．
活用する形態素の表層の形は，その基本形を書かねばならない．

\item
〈{\tt \#}読み表記〉には形態素の読みを記述する．活用する形態素につい
ては，その基本形の読みを書く．

\item 
〈{\tt \#}意味記述〉には意味情報を記述する．意味情報には任意のS式を記述する
ことができる．また，アトムとして，二重引用符({\tt "})で囲まれたテキス %"
トを自由に用いることができる．二重引用符に囲まれた範囲では任意の文字が
使用可能である．二重引用符で囲まれたアトムの中の二重引用符は
`\verb#\"#'によって記述可能である．記述されたデータは二重引用符を含ん
でそのままテキストデータとして扱われる．長さについての制限は設けていな
い．

\end{itemize}

付録\ref{app:goijisho}に形態素辞書の記述例を示す．


%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{複数辞書の使用}
%%%%%%%%%%%%%%%%%%%%%%%%%%%
\label{ss:multi-dic}

JUMAN では，必要に応じて複数の辞書を使用することが出来るようになってい
る．ここではその使用法について述べる．

辞書は \ref{ss:abst-dic}節で述べたように，文法辞書及び形態素辞書に分け
られる．複数化出来るのは，データベース辞書(jumandic.dat)・
インデックスファイル(jumandic.pat)からなる形態素辞書である．

利用者が用いる形態素辞書の指定は，他の設定と同様にリソースファイル
によって行われる．具体的な記述法につい
ては，\ref{s:option}節を参照のこと．また，複数の形態素辞書を使用する場
合は，それらは同じ文法辞書にしたがっていなければならない．


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{システム標準文法}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\label{ss:jds-s_dict}

本システムのユーザ辞書として標準の文法が用意されている．これをシステム
標準文法と呼ぶ．システム標準文法を定義する文法辞書のうち，形態品詞分類
辞書，活用辞書，連接規則辞書は，益岡・田窪文法\cite{Takubo89}を参照し，
それを拡張して作成した．

\begin{enumerate}

\item
{\bf 形態品詞分類辞書： }(cf. {\tt JUMAN.grammar})

益岡・田窪文法に「特殊」(句読点・記号・括弧など)を加え，接辞を「接頭辞」
「接尾辞」に分けて，14 種類の形態品詞を定義した．

\item
{\bf 活用辞書： }(cf. {\tt JUMAN.katuyou})

益岡・田窪文法に対して，文語的表現・口語的表現・敬語表現に対応できるよ
うに拡張を行い，21 の一般的な活用型と7の特殊な活用型を定義した．

\item
{\bf 活用関係辞書： }(cf. {\tt JUMAN.kankei})

活用する形態構造の一覧とそれらが取り得る活用型の一覧を定義している．

\item
{\bf 連接規則辞書： }(cf. {\tt JUMAN.connect.c})

新たに作成した．

\end{enumerate}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{リソースファイル ({\tt jumanrc})}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\label{s:option}

形態素解析プログラムに必要な様々な設定はリソースファイルによって指定する．
ユーザのホームディレクトリに`{\tt .jumanrc}'というファイルがあればこれが
リソースファイルとして用いられる．ユーザのホームディレクトリにこの名のファ
イルが存在しない場合は，\texttt{\$PREFIX/etc/jumanrc}が参照される．

以下に必要な設定項目を示す．これらはすべて指定されていなければならない．
(リソースファイルの記述例を付録\ref{app:option}に示す．)

\begin{enumerate}
\item {\bf 文法辞書の位置}\\
文法辞書({\tt JUAMN.grammar, JUMAN.kankei, JUMAN.katuyou,
JUMAN.connect, jumandic.tab, jumandic.mat})が存在するディレクト
リを指定する．指定は次のように行う．

\begin{verbatim}
(文法ファイル /usr/local/share/juman/dic)
\end{verbatim}

\item {\bf 形態素辞書の位置}\\
形態素辞書({\tt jumandic.dat, jumandic.pat}が存在するディレクトリを指
定する．複数の形態素辞書ディレクトリを指定することも可能である．指定は
次のように行う．

\begin{verbatim}
(辞書ファイル /home/mydir/juman/dic
              /usr/local/share/juman/dic)
\end{verbatim}

この例では，二つ形態素辞書ディレクトリを指定している．辞書引きに際しては，
これら両方のディレクトリ中の形態素辞書が用いられる
\footnote{一つの形態素辞書には同一の形態素の登録
は行われないが，複数の形態素辞書に同じ形態素が登録されている場合は
あり得る．このような場合は，同じ形態素が複数得られることになる．}．

使用する辞書の最大数は5個に設定されている．これを変更したい場合は，配布
パッケージの{\tt lib/pat.h}の{\tt MAX\_DIC\_NUMBER} の値を変更してから
インストールを行えばよい．

\item {\bf 形態素のコストの定義}\\
\ref{kaiseki}章で述べるように，形態素解析プログラムでは，解析結果の優
先情報をコストとして計算している．解析に曖昧性がある場合は，コストの総
計が低いものを優先することになっている．文法辞書によって定義
された形態素のコストを定義しなければならない．

品詞は，品詞名，または，品詞名と品詞細分類名の対によって表わされる．品
詞細分類が定義されている品詞については，品詞細分類名(または `$\ast$' )
を指定する必要がある．コストは正整数の値をとる．

\begin{verbatim}
(品詞コスト
        ((*)             10)
        ((特殊 *)       100)
        ((動詞)         100)
        ((形容詞)       100)
        ((判定詞)        11)
        ((助動詞)        10)
        ((名詞 *)       100)
        ((名詞 数詞)     40)
        ((名詞 形式名詞) 70)
        ((名詞 副詞的名詞) 70)
        ((指示詞 *)      40)
        ((指示詞 副詞形態指示詞)        60)
        ((副詞 *)       100)
        ((助詞 *)        10)
        ((助詞 終助詞)   20)
        ((接続詞)       100)
        ((連体詞)       100)
        ((感動詞)       100)
        ((接頭辞 *)      50)
        ((接尾辞 名詞性述語接尾辞)      14)
        ((接尾辞 名詞性名詞接尾辞)      35)
        ((接尾辞 名詞性名詞助数辞)      35)
        ((接尾辞 名詞性特殊接尾辞)      35)
        ((接尾辞 形容詞性述語接尾辞)    14)
        ((接尾辞 形容詞性名詞接尾辞)    14)
        ((接尾辞 動詞性接尾辞)          14)
        ((未定義語 カタカナ)            5000)
        ((未定義語 アルファベット)      100)
        ((未定義語 その他)              5000)
)
\end{verbatim}

同じ品詞に対してコストの定義が複数回指定されている場合は，後のものが優
先される．上の例では，品詞名が「名詞」の形態素のコストは 100 であるが，細
分類名が「数詞」の形態素のコストは 40 となる．また，先頭の `{\tt
(*)}' の指定により，ここで明示的に定義されていない形態素のコストはすべ
て 10 となる．

\item {\bf 連接コストと形態素コストの相対的な重みの定義}

形態素解析におけるコストの計算は形態素のコストと連接のコストの総計とし
て計算される．これら二種類のコストに異なる重みを掛けたい場合には，それ
を指定することができる．解析結果のコストはそれぞれのコストにここで指定
された重みを乗じた値の総計として計算される．

\begin{verbatim}
(連接コスト重み 4)
(形態素コスト重み 1)
\end{verbatim}

また，形態素解析の過程において，常にコストが最低の結果を出すのではなく，
ある程度のコスト幅を許容したい場合がある．この許容幅を指定することがで
きる．

\begin{verbatim}
(コスト幅 0)
\end{verbatim}

コスト計算については，\ref{kaiseki}章を参照のこと．

\item[$\ast$] {\bf 未定義語の品詞定義}\\
バージョン3.4以降ではリソースファイルでの未定義語の品詞定義は不必要と
なった．
\end{enumerate}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{形態素解析}\label{kaiseki}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

JUMANは，EUCコードの日本語文字列を標準入力から一行ごとに読み込んで入力
とし，連接規則辞書によって許容された形態素からなる束(lattice)状の構造
を出力とする．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{形態素解析アルゴリズム}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

JUMANの解析アルゴリズムは，入力として与えられた日本語の文字列に対す
る次の基本動作よりなる．改行をもって一つの入力文字列の終了とする．

\begin{itemize}
\item ある特定の位置から始まるすべての可能な形態素を辞書引きによって
得る．
\item 辞書引きによって得られた個々の形態素に対して，その直前の位置に存
在するすべての形態素との連接可能性のチェック，および，コストの計算を行
う．
  \begin{itemize}
    \item 連接可能性のチェックによって連接不可能と分かった形態素
間の接続は行われない．また，その位置で連接可能なもののうち最良
(最小)のコストと比較して {\tt jumanrc} の {\tt (コスト幅 ??)} によっ
て定義される数値以上ののコスト差をもつ形態素の接続は行われない．
  \end{itemize}
\end{itemize}

\noindent
本形態素解析では次の二種類のコストが使用される．

\begin{description}
  \item [形態素のコスト:] 個々の形態素に与えられているコストである．
形態素のコストは，{\tt jumanrc} で定義された「品詞コスト」，「形
態素コスト重み」，および，形態素辞書で定義された見出し語のコスト
に対する重み，の三つの数値の積として計算される．
  \item [連接コスト:] 二つの形態素の連接のコストである．連接規則辞
書で定義されたコストと {\tt jumanrc} で定義された「連接コスト重
み」の積として計算される．
\end{description}

形態素解析の一つの解析結果は形態素からなる列であり，その総コストは，そ
れに含まれる形態素のコストの総計，および，各形態素間の連接コストの総計
の和である．ただし，列の先頭と末尾には，それぞれ，「文頭」および「文末」
と呼ばれるダミーの形態素があると仮定する．

一般に解析結果は，文頭および文末を両端点とする束状のグラフ構造になる．
このグラフ内の文頭から文末へいたるそれぞれの経路が一つの可能な解析結果
を表わすことになる．

連接可能性のチェックおよびコストの計算の詳細について説明する．最初の辞
書引きは文字列の先頭で行われ，その直前には「文頭」が存在すると仮定さ
れる．また，「文頭」がもつコストは0である．

最初に辞書引きが行われるのは入力文字列の先頭(すなわち，「文頭」の直
後)である．以降，辞書引きが行われるのは入力文字列中において文頭から
の有効な連接をもつ形態素の直後の位置である．形態素の有効性，無効性につ
いては，以下の説明の中で述べる．

ある位置で辞書引きによって得られるすべての形態素を $Mf_j (1 \leq j
\leq n)$ とし，その位置の直前で終了する形態素が $Mb_i (1 \leq i \leq
m)$ であるとする．各$Mb_i$は文頭から自分自身へいたる束状のグラフの経路
の中で最小のコストの値を保持している．そのコストを $Cb_i$ とする．

それぞれの$Mf_j$について，すべての$Mb_i$との連接可能性のチェックを連接
行列により行う．$Mb_i$の後接情報と$Mf_j$の前接情報により，それらが連
接可能であるか，また，連接可能であればその連接コストを求める．$Mb_i$と
$Mf_j$の連接コストを $C_{i,j}$ とする(連接不可能な場合 
$C_{i,j}=\infty$ とする)．したがって，$Mf_j$に対するすべての連接コストは，

\[ Cb_1 + C_{1,j},\ Cb_2 + C_{2,j},\ \cdots, Cb_m + C_{m,j} \]

となる．これらの最小値からの差が {\tt jumanrc}の「コスト幅」以内であ
るものだけが $Mf_j$ に連接可能であると考えられる．連接可能な $Mb_i$ が
存在しない場合(すべての $C_{i,j}$ が無限大の場合)，$Mf_j$ は無効な形態
素と考えられ，以後の解析結果のグラフには含まれない．$Mf_j$ が無効でな
いとき，$Mf_j$ は 最小の $Cb_i + C_{i,j}$ の値に自身の形態素コストを
加えた値を解析結果のコストとして保持することになる．

形態素解析の最後の段階では，入力文字列の末尾に現れる有効な形態素と「文
末」との連接可能性のチェックとコスト計算が行われ，解析結果としてのグラ
フ構造が得られる．

出力としてはコスト最小(それぞれの形態素の区切りで最小コストとの差が許
容されるコスト幅以内)の解を求め，結果をオプションに従って表示する(オプ
ションについては\ref{use}節)．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{未定義語の取り扱い}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\label{subsec:undef}

本システムでは，入力文字列中のあらゆる位置で未定義語が存在する可能性を
考慮している．平仮名および漢字については一文字ずつを一語の未定義語とし
てきりだす．それ以外の文字については，同種の文字(カタカナ，アルファベッ
ト，数字 等)の終りまでをまとまった一語の未定義語とする．そして，カタカ
ナ文字列には「カタカナ」，アルファベット文字列には「アルファベット」，
それ以外には「その他」という品詞細分類を与える．

未定義語という品詞と，その細分類である「カタカナ」，「アルファベット」，
「その他」は形態品詞辞書で定義しておかなければならない．連接関係を連接
規則辞書で定義すること，コストをリソースファイルの「品詞コスト」欄で定
義することは通常の品詞と同様である．


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{インストール方法}\label{install}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

インストール方法について説明する．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Unix系OSにおけるインストール方法}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\texttt{juman-5.1.tar.gz}を展開し，\texttt{juman-5.1}ディレクトリに移動
して，次の手順を実行する．

\begin{enumerate}
 \item `\texttt{./configure}'を実行する．\\
       `\texttt{./configure}'にオプションを与えることにより，インストール先やコン
      パイルオプションなどを変更することができる．詳細は，同梱の INSTALL 
       または`\texttt{./configure --help}'の出力を参照のこと．
 \item `make'を実行する．\\
       JUMANシステムのコンパイルと辞書の構築が行われる．
 \item (rootで)`make install'を実行する．\\
       JUMANシステムと辞書がインストールされる．インストールされる場所は
       以下のとおりである．\texttt{\$PREFIX}は，デフォルトでは
       \texttt{/usr/local}であるが，`\texttt{./configure --prefix}'で設
       定できる．

       \begin{tabular}{ll}
	\texttt{\$PREFIX/bin/juman} & 実行ファイル \\
	\texttt{\$PREFIX/share/juman/dic/} & 辞書 \\
	\texttt{\$PREFIX/etc/jumanrc} & 設定ファイル \\
	\texttt{\$PREFIX/share/juman/doc/manual.pdf} & マニュアル \\
	\texttt{\$PREFIX/libexec/juman/} & 辞書作成プログラム \\
	\texttt{\$PREFIX/lib/libjuman.*} & ライブラリ \\
	\texttt{\$PREFIX/include/juman*.h} & ヘッダファイル \\
       \end{tabular}
 \item 品詞コストなどを個人で設定したい場合は，
       \texttt{\$PREFIX/etc/jumanrc}を\texttt{\$HOME/.jumanrc}としてコピー
       し，それを編集する．
\end{enumerate}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Windowsにおけるインストール方法}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\texttt{juman-5.1.exe}を実行し，表示される指示に従ってインストールを行う．
以下のファイルがインストールされる．\texttt{\$PREFIX}は，デフォルトでは
\texttt{C:\yen Program Files\yen juman}であるが，インストール途中で設定
できる．

\begin{tabular}{ll}
 \texttt{\$PREFIX/juman.exe} & 実行ファイル \\
 \texttt{\$PREFIX/dic/} & 辞書 \\
 \texttt{\$PREFIX/dic/jumanrc} & 設定ファイル \\
 \texttt{\$PREFIX/manual.pdf} & マニュアル \\
\end{tabular}

\vspace*{3ex}

現在のWindows版は試験版であり未対応の機能がある．UNIX版との違いは
次のとおりである．
\begin{itemize}
 \item 入出力は SJIS で行う(辞書などはUNIX版と同様にEUCであるが，入出力
       の時点で漢字コードの変換をしている)．
 \item jumanrcでの種々の設定はできない．辞書も一ヶ所(1フォルダ)しかもて
       ず，ここに文法辞書と形態素辞書の双方をおく．辞書の場所の設定は
       juman.iniで行う．
 \item サーバ・クライアント機能は備えていない．
\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{JUMANの使用法}\label{use}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

形態素解析の実行ファイルは{\tt juman}という名前でインストールされている．
オプション等の指定によって，この一つの実行ファイルをスタンドアロンモード
(JUMAN3.4 以前のモード)とサーバ・クライアントモード(JUMAN3.5以降で追加さ
れたモード)で使い分けることができる．各モードの使用法を以下に説明する．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{スタンドアロンモードでの使用}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

{\tt juman}を実行する．標準入力から解析するテキストを一行一文として読み
込み，解析結果を標準出力に出力する．このモードは，次節の方法でサーバ・ク
ライアントモードを明示的に指定しない場合のデフォルトのモードである．

形態素解析に必要な文法・辞書の存在場所，ならびに解析中で用いられるコス
トに関する基本的な情報はリソースファイルから読み込まれる．リソースファ
イルを探す順番は以下の順である．
\begin{enumerate}
\item 実行時に{\tt -r}オプションで指定されたファイル．
\item ユーザのホームにある{\tt .jumanrc}ファイル．
\item \texttt{\$PREFIX/etc/jumanrc}
\item 上記のいずれにもファイルが存在しない場合にはプログラムは強制終了される．
\end{enumerate}

スタンドアロンモードでは以下のオプションが用意されている．
\begin{quote}
  {\tt juman -[b|B|m|p|P] -[f|c|e|e2|E] [-i \underline{string}] 
    [-r \underline{rc\_file}]}
\end{quote}
\begin{itemize}
\item 解が曖昧性を含む場合の表示方法(曖昧性がない場合はどの方法も同
  じ表示となる) \\
  \begin{tabular}{lp{11cm}}
    {\tt -b} : & 後方最長一致の解を一つだけ表示する．\\
    {\tt -B} : & {\tt -b}オプションと同様に後方最長一致の解を表示するが，
    同じ位置に複数の形態素がある場合はそれらをすべて表示する．ある位置から
    の2つ目以降の形態素は``{\tt @}''をつけて表示する(default)．\\
    {\tt -m} : & 曖昧性のある部分だけ，複数の形態素を表示する．\\
    {\tt -p} : & 曖昧性の組合せを展開し，すべての解を個別に表示する．\\
    {\tt -P} : & {\tt -p} と {\tt -B} を合わせたもの．すなわち{\tt -p}と同
    様に曖昧性の全組合せを示すが，同じ位置の複数の形態素は{\tt -B}のよう
    に``{\tt @}''でまとめて表示する．
  \end{tabular}
\item 各形態素の表示方法 \\
  \begin{tabular}{lp{11cm}}
    {\tt -f} : & カラムを整えて表示．\\
    {\tt -c} : & 完全な形態素情報をコードで表示．\\
    {\tt -e} : & 完全な形態素情報を文字とコードで表示．\\
    {\tt -e2} : & {\tt -e} の情報に加えて意味情報を表示(default)．\\
    {\tt -E} : & {\tt -e} の情報に加えて各形態素の文中での位置と意味情報を表示．\\
  \end{tabular}
\item その他 \\
  \begin{tabular}{lp{11cm}}
    {\tt -i\ \underline{string}} : & {\tt \underline{string}} で始まる
    入力行は解析せずにそのまま出力．\\
    {\tt -r\ \underline{rc\_file}} : & {\tt \underline{rc\_file}} を 
      リソースファイルとして使用．\\
    {\tt -h} : & ヘルプメッセージを出力．\\
  \end{tabular}
\end{itemize}

以下にいくつかのオプション指定による使用例を示す．

\begin{quote}
{\baselineskip = 1.0 \baselineskip
\begin{verbatim}
% juman
私は昨日学校を休んだ
私          (わたし)     私         普通名詞      
は          (は)         は         副助詞        
昨日        (きのう)     昨日       時相名詞      
学校        (がっこう)   学校       普通名詞      
を          (を)         を         格助詞        
休んだ      (やすんだ)   休む       動詞           子音動詞マ行   タ形        
EOS
\end{verbatim}
}

{\baselineskip = 1.0 \baselineskip
\begin{verbatim}
% cat > test
子どもはリンゴがすきだ
% juman -B -e2 < test
子ども こども 子ども 名詞 6 普通名詞 1 * 0 * 0 "代表表記:子供"
は は は 助詞 9 副助詞 2 * 0 * 0 NIL
リンゴ りんご リンゴ 名詞 6 普通名詞 1 * 0 * 0 "代表表記:林檎"
が が が 助詞 9 格助詞 1 * 0 * 0 NIL
すきだ すきだ すきだ 形容詞 3 * 0 ナ形容詞 21 基本形 2 "代表表記:好きだ"
EOS
\end{verbatim}
}
\end{quote}

\noindent
※ JUMAN5.0以降，代表表記を設定し，意味情報として出力することとした(オプ
ションとして{\tt -e2}を指定)．詳細については\ref{subsec:5.0}節を参照．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{サーバ・クライアントモードでの使用}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

JUMAN3.5以降ではサーバ・クライアントモードでの使用が可能となった．この
モードでは，あるマシンで形態素解析を行うサーバを起動しておき，他のマシ
ン(同一マシンでも可)でテキストの入出力とサーバとの通信だけを行うクライ
アントを起動する．ネットワーク環境での複数ユーザによる利用などに適した
モードである．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{サーバの起動}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%

オプション{\tt -S}を指定して{\tt juman}を実行することによりサーバとして
起動される．

この場合のリソースファイルの探索順はスタンドアロンモードの場合と同様で
ある．ただし，この時得られるリソース情報(文法ファイルの位置，解析のコ
ストなど)はクライアント側でリソースファイルが読み込まれない場合にのみ
有効となる．

サーバに対するオプション指定は，サーバであることを示す{\tt -S}オプショ
ンが追加されることを除いてスタンドアロンモードと同様である%
\footnote{
  サーバ・クライアント間の通信に用いられるポート番号のデフォルト値は
  32000である．この変更は{\tt -N number}というオプションで行う．通常は
  変更の必要はない．
}．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{クライアントの起動}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

オプション{\tt -C hostname}を指定して{\tt juman}を実行することによりクラ
イアントとして起動される．{\tt hostname}はサーバを起動したマシン名である．

もう一つの方法として，サーバを起動したマシン名を環境変数{\tt
\$JUMANSERVER}に設定しておく方法がある．この環境変数が設定されていれば
オプションの指定なしでもクライアントとして起動される%
\footnote{
  サーバ・クライアント間の通信に用いられるポート番号がデフォルト値で
  ない場合は{\tt -C}オプションの場合も環境変数{\tt \$JUMANSERVER}で指定する
  場合も，サーバのマシン名の後に(空白を入れずに)':'をはさんで
  ポート番号を指定する．
}．

クライアントとして起動された場合のリソースファイルの探索順は次のようになる．
\begin{enumerate}
\item 実行時に{\tt -r}オプションで指定されたファイル．
\item ユーザのホームにある{\tt .jumanrc}ファイル．
\item 上記のいずれにもファイルが存在しない場合はサーバ側で指定されている
  リソース情報が使用される．
\end{enumerate}

クライアントに対するオプション指定は，クライアントであることを示す
{\tt -C}オプションが追加されることを除いてスタンドアロンモードと同様である．

%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Perlからの利用}
%%%%%%%%%%%%%%%%%%%%%%%%%%%

Perlモジュール``Juman''を用いることにより，PerlからJUMANを利用することが
できる．

\begin{itemize}
 \item インストール方法

       JUMANを展開したディレクトリにある\texttt{perl}ディレクトリに移動
       し，次の手順を実行する．
       \begin{enumerate}
	\item perl Makefile.PL
	\item make
	\item (rootで) make install
       \end{enumerate}
 \item 使用例

       プログラムの例を以下に示す．このプログラムを実行すると，「この文
       を形態素解析してください．」という文の解析結果(デフォルトのオプショ
       ンは``-B -e2'')が表示される．

       \begin{verbatim}
	use Juman;
	$juman = new Juman;
	$result = $juman->analysis( "この文を形態素解析してください．" );
	print $result->all();
       \end{verbatim}

       詳細は`\texttt{perldoc Juman}'の実行結果を参照のこと．
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 参考文献
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{thebibliography}{88)}
\addcontentsline{toc}{section}{参考文献}

\bibitem{Takubo89}
  \newblock {益岡隆志，田窪行則：}
  \newblock {『基礎日本語文法』}
  \newblock {くろしお出版，}
  \newblock {1989．}

\bibitem{Myoki91}
  \newblock {妙木裕，松本裕治，長尾眞：}
  \newblock {「汎用日本語辞書および形態素解析システム」}
  \newblock {情報処理学会第42回全国大会予稿集，}
  \newblock {1991．}

\bibitem{Naka94}
  \newblock {中村俊久，黒橋禎夫，長尾真}
  \newblock {「部分文字列情報の利用による日本語単語の高速検索」}
  \newblock {情報処理学会自然言語処理研究会}
  \newblock {NL-101, 1994．}

\bibitem{Yamaji96}
  \newblock {山地 治，黒橋 禎夫，長尾 真}
  \newblock {「連語登録による形態素解析システムJUMANの精度向上」}
  \newblock {言語処理学会 第2回年次大会}
  \newblock {1996.}

\end{thebibliography}

\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 付録 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent
{\LARGE\bf 付録}
\addcontentsline{toc}{section}{付録}

\appendix

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{ユーザ辞書の記法の定義と例}\label{app:jisho_rei}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

ユーザ辞書の記法をBNFによって示す．以下，〈$\cdots$〉は非終端記号名を
表わす．〈{\tt \#}形態品詞名〉のように{\tt \#}が付けられた非終端記号は
ユーザによって定義される具体的な名前を表わすと仮定する．{\tt NIL}は空
リストではなく，空系列を表わす．

\subsection{形態品詞分類辞書({\tt JUMAN.grammar})の記述}\label{app:grammar}

\subsubsection{形態品詞分類辞書の個々の項目の記述}

\begin{tt}
\begin{tabular}{lll}
〈形態品詞分類辞書項目〉& ::= & (〈形態品詞〉)
                                | (〈形態品詞〉 (〈品詞細分類の並び〉)\ )\\
\\
〈形態品詞〉    & ::= & (〈\#形態品詞名〉) | (〈\#形態品詞名〉 \%)\\
〈品詞細分類の並び〉& ::= & 〈品詞細分類〉〈品詞細分類の並び〉\\
〈品詞細分類〉  & ::= & (〈\#品詞細分類名〉) | (〈\#品詞細分類名〉 \%)\\
\end{tabular}
\end{tt}

\subsubsection{形態品詞分類辞書の定義例}

\begin{verbatim}
   ((動詞 %))                        ; 動詞は形態品詞名であり，活用する．

   ((名詞)                           ; 名詞は形態品詞であり，
           ((普通名詞)               ; 普通名詞，サ変名詞，固有名詞 ... に
            (サ変名詞)               ; 細分類される．
            (固有名詞)
            (数詞)
            (形式名詞)
            (副詞的名詞)))

   ((接尾辞)
           ((名詞性述語接尾辞)
            (名詞性名詞接尾辞)
            (名詞性名詞助数辞)
            (形容詞性述語接尾辞 %)   ; 形容詞性述語接尾辞は活用する．
            (形容詞性名詞接尾辞 %)
            (動詞性接尾辞 %)))
\end{verbatim}

\clearpage

\subsection{活用関係辞書({\tt JUMAN.kankei})の記述}\label{app:kankei}

\subsubsection{活用関係辞書の個々の項目の記述}

\begin{tt}
\begin{tabular}{lll}
〈活用関係辞書項目〉& ::= & (〈品詞〉 (〈活用型の並び〉)\ ) \\
\\
〈品詞〉        & ::= & (〈\#形態品詞名〉) | 
                        (〈\#形態品詞名〉〈\#品詞細分類名〉)\\
〈活用型の並び〉& ::= & 〈\#活用型名〉 | 〈\#活用型名〉〈活用型の並び〉\\
\end{tabular}
\end{tt}

\subsubsection{活用関係辞書の定義例}

\begin{verbatim}
   ((形容詞)                  ; 形容詞はイ形容詞とナ形容詞という活用型をもつ
            (イ形容詞
             ナ形容詞))

   ((助動詞)
           (イ形容詞
            ナ形容詞
            判定詞
            無活用型
            助動詞ぬ型
            助動詞だろう型
            助動詞そうだ型))

   ((接尾辞 形容詞性述語接尾辞)  ; 接尾辞の中で形容詞性述語接尾辞に細分類される
           (ナ形容詞             ; 形態素はナ形容詞またはイ形容詞という活用型を
            イ形容詞))           ; もつ
\end{verbatim}

\clearpage

\subsection{活用辞書({\tt JUMAN.katuyou})の記述}\label{app:katuyou}

\subsubsection{活用辞書の個々の項目の記述}

\begin{tt}
\begin{tabular}{lll}
〈活用辞書項目〉& ::= & (〈\#活用型名〉 (〈活用形対の並び〉)\ ) \\
\\
〈活用形対の並び〉& ::= & 〈活用形対〉
                        | 〈活用形対〉〈活用形対の並び〉\\
〈活用形対〉 & ::= & (〈\#活用形名〉〈語尾表示〉) \\
〈語尾表示〉 & ::= & 〈\#語尾〉 | {\tt *}
\end{tabular}
\end{tt}

\subsubsection{活用辞書の定義例}\label{app:katuyou_rei}

\begin{verbatim}
   (母音動詞
       ((語幹             *   )
        (基本形           る  )
        (未然形           *   )
        (意志形           よう)
        (命令形           ろ  )
        (命令形           よ  )
        (基本条件形       れば)
        (基本連用形       *   )
        (タ形             た  )
        (タ系条件形       たら)
        (タ系連用テ形     て  )
        (タ系連用タリ形   たり))
   )

   (サ変動詞
       ((基本形           する  )
        (未然形           さ    )
        (意志形           しよう)
        (命令形           しろ  )
        (命令形           せよ  )
        (基本条件形       すれば)
        (基本連用形       し    )
        (タ形             した  )
        (タ系条件形       したら)
        (タ系連用テ形     して  )
        (タ系連用タリ形   したり))
   )
\end{verbatim}

\clearpage

\subsection{連接規則辞書({\tt JUMAN.connect})の記述}\label{app:connect}

\subsubsection{連接規則の記述}

\noindent
\begin{tt}
\begin{tabular}{lll}
〈連接規則〉& ::= & ( (〈形態素構造の並び〉) (〈形態素構造の並び〉) ) ｜\\
 & & ( (〈形態素構造の並び〉) (〈形態素構造の並び〉) 〈\#連接コスト〉) \\

〈形態素構造の並び〉& ::= & 〈形態素構造〉
                          | 〈形態素構造〉〈形態素構造の並び〉\\
〈形態素構造〉& ::= & (〈\#形態品詞名〉) ｜
        (〈\#形態品詞名〉〈\#品詞細分類名〉) ｜\\
 & \multicolumn{2}{l}{(〈\#形態品詞名〉〈\#品詞細分類名〉〈\#活用型名〉) ｜}\\
 & \multicolumn{2}{l}{(〈\#形態品詞名〉〈\#品詞細分類名〉〈\#活用型名〉〈\#活用形名〉) ｜}\\
 & \multicolumn{2}{l}{(〈\#形態品詞名〉〈\#品詞細分類名〉〈\#活用型名〉〈\#活用形名〉〈\#見出し語〉)}
\end{tabular}
\end{tt}

\vspace{2mm}
\noindent
〈{\tt \#}形態品詞名〉〈{\tt \#}品詞細分類名〉〈{\tt \#}活用型名〉
〈{\tt \#}活用形名〉〈{\tt \#}見出し語〉については，{\tt *}も指定でき
る．

\noindent
〈{\tt \#}連接コスト〉は 0 から 255 までの整数値(省略された場合はのデ
フォルト値は10)．

\subsubsection{連接規則の定義例}

\begin{verbatim}
   (((名詞)                      ; 名詞，指示詞の名詞形態指示詞などは
     (指示詞 名詞形態指示詞)      ; 判定詞および特殊の読点と連接可能
     (接尾辞 名詞性述語接尾辞)
     (接尾辞 名詞性名詞接尾辞)
     (接尾辞 名詞性名詞助数辞))
           ((判定詞)
            (特殊 読点))
   )

   (((名詞 サ変名詞)                     ; サ変名詞と接尾辞の「化」には，
     (接尾辞 名詞性名詞接尾辞 * * 化))    ; 「する」「できる」などが
           ((動詞 * サ変動詞 * する)     ; 後接可能である．
            (動詞 * 母音動詞 * できる)   ; また，その連接のコストは 5 であり
            (動詞 * 母音動詞 * 出来る))  ; 結合度が強い．
           5 )
\end{verbatim}

\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{形態素辞書の記述}\label{app:goijisho}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{形態素の記述}

\begin{tt}
\begin{tabular}{lll}
〈形態素定義〉  &::=&(〈\#形態品詞名〉〈形態素情報の並び〉) |                \\
                &   &(〈\#形態品詞名〉(〈\#品詞細分類名〉〈形態素情報の並び〉))\\
〈形態素情報の並び〉&::=&〈形態素情報〉 | 〈形態素情報〉〈形態素情報の並び〉\\
〈形態素情報〉  &::=& (〈見出し語情報〉〈読み情報〉〈活用型情報〉〈意味情報〉)\\
〈見出し語情報〉&::=& (見出し語 〈見出し語内容の並び〉) \\
〈見出し語内容の並び〉&::=&〈見出し語内容〉 | 〈見出し語内容の並び〉\\
〈見出し語内容〉&::=& 〈\#見出し語表記〉 | (〈\#見出し語表記〉)  | \\
                &   &  (〈\#見出し語表記〉〈\#数値〉) \\
〈読み情報〉    &::=& (読み 〈\#読み表記〉) \\
〈活用型情報〉  &::=& (活用型 〈\#活用型名〉) | NIL \\
〈意味情報〉    &::=& (意味情報 〈\#意味記述〉) | NIL
\end{tabular}
\end{tt}

\vspace{2mm}
\noindent
〈活用型情報〉については，活用すると定義された形態素に対しては省略する
ことができない．\\
〈意味情報〉は，省略可能．

\subsection{形態素の記述例}

\begin{verbatim}
    (名詞
      (普通名詞
        ((見出し語 日本語)
         (読み にほんご))
        ((見出し語 英語)
         (読み えいご))
      )
    )

    (動詞
        ((見出し語 (歩く) (あるく 1.5))
         (読み あるく)
         (活用型 子音動詞カ行)
         (意味情報 "walk(X)")
        )
    )
\end{verbatim}

\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{リソースファイル({\tt jumanrc})の記述例}\label{app:option}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{verbatim}
     (文法ファイル /usr/local/share/juman/dic)
 
     (辞書ファイル /usr/local/share/juman/dic)

     (品詞コスト
        ((*)             10)
        ((特殊 *)       100)
        ((動詞)         100)
        ((形容詞)       100)
        ((判定詞)        11)
        ((助動詞)        10)
        ((名詞 *)       100)
        ((名詞 数詞)     40)
        ((名詞 形式名詞) 70)
        ((名詞 副詞的名詞) 70)
        ((指示詞 *)      40)
        ((指示詞 副詞形態指示詞)        60)
        ((副詞 *)       100)
        ((助詞 *)        10)
        ((助詞 終助詞)   20)
        ((接続詞)       100)
        ((連体詞)       100)
        ((感動詞)       100)
        ((接頭辞 *)      50)
        ((接尾辞 名詞性述語接尾辞)      14)
        ((接尾辞 名詞性名詞接尾辞)      35)
        ((接尾辞 名詞性名詞助数辞)      35)
        ((接尾辞 名詞性特殊接尾辞)      35)
        ((接尾辞 形容詞性述語接尾辞)    14)
        ((接尾辞 形容詞性名詞接尾辞)    14)
        ((接尾辞 動詞性接尾辞)          14)
        ((未定義語 カタカナ)            5000)
        ((未定義語 アルファベット)      100)
        ((未定義語 その他)              5000)
     )

     (連接コスト重み 4)

     (形態素コスト重み 1)

     (コスト幅 0)
\end{verbatim}

\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{JUMANサーバのプロトコルの概要}\label{protocol}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

JUMANサーバに接続すると，最初の１行にJUMANやサーバのバージョンが出力される．
現在のJUMANでは，入出力ともに，文字コードは日本語EUC，
改行コードは {\tt LF}(ASCII 10) となっている．

JUMANサーバと通信するためのコマンドを以下に示す．

\begin{description}

\item[{\tt RUN [options]}] ~

形態素解析を実行する．

{\tt RUN}を，必要があれば後ろにオプションをつけて入力すると`{\tt 200
OK}' と出力される．オプションはJUMAN起動時のものと同じである．

つづいて，日本語の文章を日本語EUCで入力すると，改行を入力するごとにそ
の行の解析結果が出力される．

入力は，Ctr-k (ASCII 0b) のみの行を入力することで終了する．その結果，
終了のしるしとしてASCII 0b と改行が出力されるが，これは普通の端末では
空行2行が出力されたようになる．

解析中に異常が発生した場合は，`{\tt 500}' の後に，エラーメッセージが表
示される．

\item[{\tt RC}] ~

設定ファイルの読み込みを行う．

{\tt RC} を入力した後，設定内容({\tt jumanrc}ファイルの内容)を入力する．
入力は，Ctr-k (ASCII 0b) のみの行を入力することで終了する．

設定の読み込みが正常終了した場合は，`{\tt 200 OK}' と出力される．設定
を誤った書式で入力した場合は，サーバプログラムは処理を中止し接続が切れ
る(より親切なエラーメッセージに変更の予定)．

\item[{\tt HELP}] ~

簡単な説明を表示する．

\item[{\tt QUIT}] ~

接続を切断する．

\end{description}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{JUMANの更新履歴}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{JUMAN 0.8 からJUMAN 1.0 への拡張点}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{enumerate}
\item
ICOT辞書との結合により語彙総数が大幅に増加した(異なり形態素数約13万語)
\item
複数の形態素辞書を同時に使用できるようにした．
\item
MCC自然言語処理研究グループにより辞書引きの高速化のためのハッシング機
能が追加された．
\item
解析中に使用するコストの計算方法を統一的なものにした．
  \begin{itemize}
    \item 形態素自身にコストを持たせた．
    \item 連接コストを連接規則個別に定義できるようにした．
    \item 形態素コストと連接コストに重みを付けることができるようにした．
    \item 形態素間の連接点で許容可能なコストの幅を指定できるようにした．
  \end{itemize}
\item
複数の見出し語(かな表記を含む)をもつ形態素を単一の形態素として記述でき
るようした．また，それぞれの見出し語に相対的な重みを記述できるよう
にした．
\item
連接規則辞書中でマクロ定義を行えるようにした．
\item
個人ユーザが記述するオプショナルな情報を {\tt .jumanrc} というファイル
にまとめて記述するように変更した．
\item
C版のシステムからソケットを介して結果がSICStus Prologに渡るようになっ
た．これに伴い，Prolog版の形態素解析プログラムが不要になった．
\item システム標準文法における助詞の分類のうち, 「提題助詞」と「取り立
て助詞」の区別を止め, 「副助詞」に統一した. 
\end{enumerate}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{JUMAN 1.0 からJUMAN 2.0 への拡張点}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{enumerate}
\item
UNIXに標準装備のハッシュデータベースndbmを用い，さらに，疑似的なTRIE構
造を実現することにより，辞書引きを高速化した．

\item
システムのコンパイルを従来の{\tt gmake}ではなく，{\tt make}により実行
できるようにした．
\end{enumerate}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{JUMAN 2.0 から JUMAN 3.0 への拡張点}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
{\hfill (黒橋 禎夫 \ 山地 治 \ 大石 巧 \ 坂口 昌子)}

以下の機能拡張，および整備を行った．
\begin{enumerate}
\item 連語処理
\item 数詞の連結処理
\item 括弧，空白の透過処理
\item カタカナ語の扱い
\item 解析結果の表示オプションの追加
\item 標準辞書の整備
\item 標準文法の整備
\item 辞書システムのGDBMバージョンの追加
\end{enumerate}
それぞれについて以下で詳しく説明する．

%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{連語処理}
%%%%%%%%%%%%%%%%%%%%%%%%

形態素並びを連語として一括登録し，連語としての固有のコスト，固有の
接続を指定できる機能を追加した．このことの利点は次の2点である．
\begin{itemize}
\item これまで品詞コスト，連接コストの調整では対処しきれなかった(対処
  すると副作用を生むような)解析誤りを，連語の登録によって解決すること
  ができる．連語登録にはほとんど副作用がない．
\item 2語の連接可能性を指定するという，これまでの枠組では表現できなかっ
  た連接条件を，連語の連接条件として指定することができる．たとえば，ナ
  形容詞テ形に連語「は(副助詞)＋ない(接尾辞)」が接続可能であるというよ
  うな指定ができる．これを，ナ形容詞テ形と副助詞「は」，副助詞「は」と
  接尾辞「ない」がそれぞれ連接可能であるとしてしまうと大変な副作用があ
  る．
\end{itemize}

連語の辞書記述は`{\tt dic}'という拡張子をもつファイルで行う．中間辞書，
システム形態素辞書への変換はこれまでどおりである({\tt makeint
*.dic; makehd *.int} とする場合，コンパイル作業はこれまでとまったく同じ)．
辞書記述は次の形式で行う．
{\baselineskip = 0.8 \baselineskip
\begin{verbatim}
(連語
 ((副詞 ((読み より)(見出し語 より)))
  (形容詞 ((読み よい)(見出し語 よい)(活用型 イ形容詞アウオ段)(活用形 *)))
) 0.6 )
\end{verbatim}}
はじめに形態品詞名に相当するものとして「連語」と指定し，
次に連語を構成する各形態素の情
報を通常の形態素辞書と同じ形式で並べる．連語内に活用する形態素がある場
合は，その活用型と活用形を指定する必要がある(このとき見出し語と読みに
は基本形を与える)．
連語の末尾が活用する形態素で，そ
の活用形が何でもよいという場合(上の例で「よりよい」だけでなく「より
よく」，「よりよき」なども可能な場合)は``{\tt (活用型 *)}''とする．

最後の数字は連語コスト($0 < 連語コスト \leq 1.0$)で，省略された場合
は0.5となる．連語全体のコストは，連語を構成する各
形態素のコストと，各形態素間の連接コストの総和に，この連語コストをかけた値と
して計算される．

一方，連語固有の接続規則を指定する場合は，次のように行う．
{\baselineskip = 0.8 \baselineskip
\begin{verbatim}
(((形容詞 * ナ形容詞 ダ列タ系連用テ形))
        ((連語 * イ形容詞アウオ段 * はない)
         (連語 * イ形容詞アウオ段 * もない)))
\end{verbatim}}
形態品詞名を「連語」，品詞細分類名を「{\tt *}」とし，活用型，活用形は連語末
尾の形態素の活用型，活用形を与える．連語固有の連接規則の指定がない場合
には，左の連接については連語中の先頭の形態素の連接，右の連接については
連語中の末尾の形態素の連接がそのまま使われる．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{数詞の連結処理}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

入力文中に数詞(辞書に数詞として登録されている語)が連続して現れる場合，
それらを連結して一語の数詞を出力する機能を追加した．これは標準文法依存
の機能である．この機能を削除したい場合には{\tt makefile}中の{\tt
NEUMERIC\_P}というフラグを削除すればよい．
 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{括弧，空白の透過処理}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

括弧は連接する2語の間にほぼ任意に現れる，これを括弧とその前後の語との
連接規則で規定することはほとんど不可能であった．そこで，括弧は任意の語
の間に現れえるとして，その前の語と後の語の連接を調べるという透過処理の
機能を設けた．たとえば``書いて」いた''の場合，``書いて''と``いた''が連
接可能であるかどうかが調べられる．この時，加算されるスコアは``書いて''，
``」''，``いた''の形態素スコア，および``書いて--いた''の連接スコアとな
る．これも標準文法依存の機能であるので，この機能を削除したい場合には
makefile中の{\tt THROUGH\_P}というフラグを削除すればよい．

なお，通常は許されない連接が括弧が入ることで許されるようになるという現
象もあるので，これまでどおり括弧を一形態素として扱う処理(パス)も残し，
そのような現象は括弧を通した連接規則として規定している(詳しくは連接規
則を参照)．

一方，丸括弧の場合は一つの括弧ではなく括弧のペア，``（$\cdots$）''が任
意に挿入される．この場合には``解（わか）る''のように2語の間ではなく1語
の内部に挿入される用法もあるので，JUMANの中で統一的に扱うことは極めて
困難である．丸括弧を処理(削除)するようなプリプロセッサを用意するなど
の方法で対処して頂きたい．(標準文法では一応 丸括弧も透過処理の対象とし
ている)

テキスト中の2語の間に任意に現れる同じ問題として，空白の問題がある．
2.0版では入力文中の空白は自動的に削除され，形態素解析結果としては空白
の存在は何も示されなかった．3.0版では，空白についても連接の透過処理の
枠組で扱うことに変更し，入力文中に空白があれば形態素解析結果としても空
白が表示されるようにした．(この情報は形態素解析結果から元テキストを復
元する際などに必要となる)．

これに伴い，品詞「特殊」に「空白」という細分類を追加し({\tt
JUMAN.grammar})，全角空白は「特殊--空白」という品詞の形態素として辞書
登録した({\tt Special.dic})．半角空白については，JUMANが基本的に全角文
字列に対する処理システムであり，半角文字列の辞書登録，解析をサポートし
ていなかったため，解析システム(プログラム)内部で定義しておくという方法
をとった．出力としては，全角空白はそのまま``　''，半角空白は
``$\backslash$\ ''
と表示される．これらの空白処理の機能についても，makefile中のフラグ{\tt
THROUGH\_P}を削除することで無効にできる．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{カタカナ語の扱い}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

これまでは入力文中のカタカナ連続を未定義語(大きなペナルティが与えられ
る)として切り出していたが，これを通常のサ変名詞として扱うように変更し
た．また，標準辞書からカタカナのみからなる語を削除した．カタカナ表記の
場合たえず新語がつくり出されるので，辞書で対処することは実質上不可能で
あると判断したためである．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{解析結果の表示オプションの追加}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

以下の解析結果表示オプションとして，{\tt -B}，{\tt -P}，{\tt -E}を追加
した(従来からのオプションとともに\ref{use}節で説明)．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{標準辞書の整備}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

語彙総数を増大し(異なり形態素数約20万)，また一つの形態素に対しても，次
のように種々の表記の見出し語を用意した．
{\baselineskip = 0.8 \baselineskip
\begin{verbatim}
(名詞 
  (普通名詞 
    ((読み ふりそで)
     (見出し語 振り袖 (振りそで 1.6) (ふり袖 1.6) (ふりそで 1.6)))))
\end{verbatim}}

しかし，平仮名を含む表記は解析誤りの原因ともなるので，名詞に関しては以下
のような制限を設けた．
\begin{itemize}
\item 基本的な漢字(小学校1,2年で習う漢字)を平仮名書きする表記は作成しない．
\item 漢字の部分を平仮名書きする表記に対しては，その長さに応じて
  1文字の場合3, 2文字の場合2.0, 3文字以上の場合1.6という相対重みを与える．
\end{itemize}

3.0標準辞書のコンパイル時間はSPARCstation20上で約2時間半，作成される
{\tt JUMANTREE.dbm.pag}のサイズは約130Mバイトである．なお，もちろん
JUMAN2.0標準辞書をJUMAN3.0システムで用いることも可能である．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{標準文法の整備}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

標準文法の整備を行った．まず，連接規則の精密化を行った．特に，助詞
間の連接については大幅な見直しを行った．

また，活用等に関しても，これまで扱っていなかった文語形，省略形
(口語的)などに対応した．
\begin{center}
\begin{tabular}{llll} \hline
動詞     & タ系連用チャ形 & ちゃ & (\underline{書いちゃ}困る) \\
動詞     & 音便条件形 & りゃ & (\underline{泳ぎゃ}直る) \\
イ形容詞 & 文語連用形 & ゅう & (\underline{美しゅう}ございます) \\
イ形容詞 & 文語基本形 & し & (\underline{広し}といえども) \\
イ形容詞 & 文語命令形 & かれ & (\underline{美しかれ}と願う) \\
ナ形容詞 & ダ列タ系連用ジャ形 & じゃ & (\underline{きれいじゃ}ない) \\
ナ形容詞 & ダ列文語連体形 & なる & (\underline{雄大なる}アフリカ) \\
ナ形容詞 & ダ列文語条件形 & なれば & (\underline{平和なれば}こそ) \\
ナ形容詞 & デス列省略推量形 & でしょ & (\underline{静かでしょ}) \\
助動詞だろう型  & デス列省略推量形 & でしょ & (走らない\underline{でしょ}) \\
\multicolumn{3}{l}{動詞性接尾辞 る (活用型 母音動詞)}  & (食べて\underline{る}，食べて\underline{た}) \\
\multicolumn{3}{l}{動詞性接尾辞 う (活用型 子音動詞ワ行)} & (書いちゃ\underline{う}，書いちゃ\underline{った}) \\ \hline
\end{tabular}
\end{center}

判定詞に関しては特殊連体形「の」をたて，他の活用形もふくめて接続を正確
なものに修正した．標準的に用意した{\tt .jumanrc}({\tt jumanrc.sample})
では判定詞の品詞コストを11，助詞の品詞コストを10としているので，明確に
判定詞である場合(接続表で規定されている場合)は判定詞，それ以外は助詞と
解釈される．たとえば，「学生\underline{の}ように〜」「学生\underline
{で}はない」「学生\underline {な}わけがない」などは判定詞と解析される．

判定詞とナ形容詞関係の活用型の違いは次のようにまとめられる．
\begin{center}
\begin{tabular}{llll} \hline
             & 基本連体形        & 特殊連体形          & 基本連用形 \\ \hline
ナ形容詞     & な (静かな)       & ---                 & に (静かに) \\
ナノ形容詞   & な (大量な)       & の (大量の)         & に (大量に) \\
ナ形容詞特殊 & な (同じな(ので)) & {\tt *} (同じ)      & に (同じに) \\
判定詞       & な (学生な(ので)) & の (学生の(ようだ)) & ---         \\ \hline
\end{tabular}
\end{center}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{辞書システムのGDBMバージョンの追加}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

辞書システムのもとになっているハッシュ・ライブラリNDBMはOS依存で，移植
性などに問題があったため，別にGDBMのバージョンを用意した．{\tt
Makefile}で{\tt \# --- Use GDBM File ?}以下の2行をコメントアウトすれば
NDBM，コメントアウトしなければGDBMとして動作する(配布時はNDBM)．

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{JUMAN 3.0 からJUMAN 3.1 への拡張点}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{enumerate}
\item 奈良先端科学技術大学院大学松本研究室の日本語形態素解析システム
  『茶筅』の辞書システム(パトリシア)を取り込んだ．
  これに伴いインストール方法(\ref{install}節参照)，
  システム辞書名，プログラム名などに変更があるので，注意が必要．
  \begin{quote}
  \begin{tabular}{lll} \hline
    JUMAN3.0 & & JUMAN3.1 \\ \hline \hline
    {\tt JUMANTREE.table} & $\leftrightarrow$ & {\tt jumandic.tab} \\ \hline
    {\tt JUMANTREE.matrix} & $\leftrightarrow$ & {\tt jumandic.mat} \\ \hline
    {\tt JUMANTREE.dbm.dir} &  & {\tt jumandic.dat} \\ 
    {\tt JUMANTREE.dbm.pag} & $\leftrightarrow$ & {\tt jumandic.pat} \\ 
    {\tt JUMANTREE.imis} & \\ \hline
    {\tt makehd} & $\leftrightarrow$ & {\tt makepat} (正確には対応しない, \\
    & & 辞書のコンパイルはMakefileによる) \\ \hline
    {\tt .jumanrc}の辞書ファイル指定 \\
    ファイル名({\tt .../JUMANTREE}) & $\leftrightarrow$ & 
    ディレクトリ名 \\ \hline
  \end{tabular}
  \end{quote}
\item 解析オプションとして，{\tt -i}，{\tt -r}を追加した(\ref{use}節参照)．
\item 固有名詞についてコスト調整を行い，ある程度正しく解析されるよう
  にした．
\end{enumerate}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{JUMAN 3.1 からJUMAN 3.2 への拡張点}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{enumerate}
\item 
従来，品詞定義として名詞の細分類に固有名詞，地名，人名があったが，標
準辞書ではこれらを区別せずにすべて固有名詞としていた．これを地名，人名，
その他(固有名詞)に分類した．

\item 
助詞の細分類の中に名詞接続助詞と述語接続助詞があったが，この分類は不統
一であったので，これらをまとめて接続助詞という細分類とした．また，「と
同時に」などの複合的な助詞を削除した．

\item 
京都大学でのコーパス作成プロジェクトでの使用を通して，標準文法，標準辞
書の整備を行った．品詞コストの調整も若干行ったので，個人用に.jumanrcを
設定している場合はjumanrc.sampleを参照のこと．

\end{enumerate}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{JUMAN 3.2 からJUMAN 3.3 への拡張点}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{enumerate}
\item 活用形に漢字が含まれる場合に(標準文法では「カ変動詞来」と
「動詞性接尾辞得る型」)，その読みを活用型の定義に含めるようにした．こ
れによって，「来る」などの読みの部分に漢字が含まれることがなくなった．

\item 長い文を入力しても「Too many morphs」のエラーが出ないよう改善した
  (形態素の配列の記憶領域の確保を動的なものに変更した)．

\item 標準文法および標準辞書の整備．

\end{enumerate}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{JUMAN 3.3 からJUMAN 3.4 への拡張点}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{enumerate}
\item 固有名詞の分類として組織名をふやし，固有名詞辞書を整備した．
  (SRIの亀山さん，NYUの関根さんに情報を頂きました．感謝いたします)

\item 未定義語を品詞としてJUMAN.grammarで定義し，細分類として「カタカ
  ナ」，「アルファベット」，「その他」を設けた．「カタカナ」はカタカナ
  列，「アルファベット」はアルファベット列，「その他」はそれ以外の同一
  文字種列(ただし平仮名，漢字は一文字)がプログラムによって切り出される．
  これらの接続，重みなどは通常の品詞と同様にJUMAN.connect，.jumanrcな
  どで定義する．

\item 標準文法および標準辞書の整備．

\end{enumerate}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{JUMAN 3.4 からJUMAN 3.5 への拡張点}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{enumerate}
\item サーバ・クライアント方式への拡張(学術情報センターの影浦峡先生，
  吉岡真治先生にご協力頂きました．感謝いたします)．

\item プログラム中のリソースファイルの扱いを以下のように整理した．
  \begin{itemize}
  \item 関数 read\_jumanrc\_fn → set\_jumanrc\_fileptrに変更 \\
    (リソースファイルのファイル名(Jumanrc\_File)ではなく
    ファイルポインタ(Jumanrc\_Fileptr)を設定)
  \item 関数 read\_jumanrcfile → set\_jumangram\_dirnameに変更 \\
    (文法ファイルのディレクトリ名を設定，変数名はJumanpath\_rcから
    Jumangram\_Dirnameに変更)
  \item 関数 read\_jumanpathrc → 削除
  \item 関数 juman\_init → juman\_init\_rcに変更 \\
    (リソースファイル関係の初期化)
  \item 関数 juman\_init2  → juman\_init\_etcに変更 \\
  \end{itemize}
\end{enumerate}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{JUMAN 3.5 からJUMAN 3.6 への拡張点}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{enumerate}
\item Windows版の作成．
\item Perlモジュール(Juman.pm)の作成．
\item 連語処理のbug fix．
\end{enumerate}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{JUMAN 3.6 からJUMAN 3.61 への拡張点}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{enumerate}
\item iotool.cの修正 ({\tt \$HOME}が設定されていなくて動作するように)
\item trans.cの修正 (Pentium IIマシンで浮動小数の丸め誤差の影響について
  報告があったので対処)
\item 辞書・接続表などの若干の修正 \\
  (連語「しかいない」，「はしたものの」，「においてよく」など)
\end{enumerate}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{JUMAN 3.61 からJUMAN 4.0への拡張点}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{enumerate}

\item 辞書の変更：EDR日本語単語辞書の利用をやめ，大規模テキスト中の統計
量をもとに，約6万8千語の独自の辞書を構築した．これに関連して次の変更を行っ
た．

\begin{enumerate}
\item ナ形容詞語幹と名詞が重複するものについては，名詞見出し語を削除し，
      ナ形容詞語幹の連接を名詞に準ずるものとした．
\item 一般的なカタカナ見出し語を与えたので，「未定義語カタカナ」の
      コストを「未定義語その他」と同じく5000とした．これにより，
      例えば「テレビゲーム」は「テレビ」「ゲーム」となる．
\item 形態素辞書の「意味情報」として"可能動詞"の記述を与えた．
\end{enumerate}

\item juman\_lib.cのbug fix
\end{enumerate}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{JUMAN 4.0 からJUMAN 5.0への拡張点}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\label{subsec:5.0}

概要
\begin{itemize}
 \item 日本語の基本的語彙，約3万語(固有名詞を除く)を選定した．
 \item 表記バリエーションの整備を行い，代用表記を出力することとした．
 \item その他の整備（読みの音訓情報の付与，「読ます」「読まされる」などの
  使役形への対応）
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{見出し語の整備}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

辞書の整備（表記バリエーション，意味情報付与など）を適切に行っていくた
めに，また，不必要に大きな語彙による副作用（解析誤り）を防ぐために，標
準的日本語で用いられる基本的語彙を選定した．ほとんど使われることのない
古語などは排除し，複合語についても，構成性原理が成り立つものについては
原則的に見出し語から排除した．判断基準は，京都コーパスでの頻度，新聞2
千万文の自動解析での頻度，国語辞典の見出し語となっているかどうか，など
から総合的に判断した．その結果，固有名詞を除く自立語(名詞，動詞，形容
詞，副詞，連体詞，接続詞，感動詞)について，約3万語の辞書となった．

（※JUMAN4.0からこの方向で整理を行ったが，今回，一応の整理を完成した．）

なお，京都コーパス4.0はJUMAN5.0の語彙に対応している．


\paragraph{判断基準について} \ 

句，事典的な語は排除
\begin{quote}
\begin{itemize}
 \item[例）] 育ての親，断腸の思い \\
	   元寇 倭寇 遣隋使 遣唐使 太郎冠者
\end{itemize}
\end{quote}

連用形＋名詞も基本的には排除（相互情報量などでKNPで一語にする必要あり）
\begin{quote}
\begin{itemize}
 \item[例）] 操り人形 打ち上げ花火 埋め立て地
\end{itemize}
\end{quote}

2文字のものは原則採用，3文字以上のものは原則排除
\begin{quote}
\begin{itemize}
 \item[例）] 印刷機，映写機，航空機．．． \\
	観光地 原産地．．． \\
	運動場 競技場．．． \\
	組合員 銀行員．．． \\
	観覧車 機関車 救急車．．． \\
	無重力 無期限．．． \\
	重金属 重工業．．．
\end{itemize}
\end{quote}

しかし，以下のようなものは若干採用した．

\begin{itemize}
 \item 例解小学国語辞典の見出しとなっているもの（の一部）
       \begin{quote}
	\begin{itemize}
	 \item[例）] 絵葉書
	\end{itemize}
       \end{quote}

 \item 切り方が？なもの
       \begin{quote}
	\begin{itemize}
	 \item[例）] 工学部 医学部 全速力 水産物 海産物 林産物
	\end{itemize}
       \end{quote}

 \item 音訓の原則（後述）では読みが分からなくなるもの
       \begin{quote}
	\begin{itemize}
	 \item[例）] 記念日 \\
		   オレンジ色（青色 赤色 黄色 橙色などもあるので）
	\end{itemize}
       \end{quote}

  しかし，次のようなものは読みが分からなくなっても排除した．
       \begin{quote}
	\begin{itemize}
	 \item[例）] 基準日（にち） \\
		   金メダル 金メッキ（かね）
	\end{itemize}
       \end{quote}

 \item 構成語が濁音となり，平仮名表記の場合に解析できなくなるもの．
       \begin{quote}
	\begin{itemize}
	 \item[例）] 旗印（じるし） 溜まり醤油（じょうゆ） 掛け布団（ぶ
		   とん） 毒蜘蛛（ぐも）\\
		   計画倒れ（連用形でも濁音では解析できないので）
	\end{itemize}
       \end{quote}

  なお，構成語の濁音の平仮名表記は，一部，独立の見出し語とし，
  代表表記はもとの漢字表記とした．
       \begin{quote}
	\begin{itemize}
	 \item[例）] じるし（印） じょうゆ（醤油） ぶとん（布団） げんか（喧嘩）\\
	\end{itemize}
       \end{quote}

 \item カタカナの判断は難しい．例えば「フルタイム」「パートタイム」「フルセット」
  は排除，「フルコース」は採用した．

 \item その他，排除して問題となっているもの
       \begin{quote}
	\begin{itemize}
	 \item[例）] 小(しょう)/悪魔 \\
		   ロシア/正教（まさのり） \\
		   有田/焼（未定義語） \\
		   十（じゅう）/進法 \\
		   トップ/１０（いちぜろ） \\
		   トップテン（未定義語） ベストテン（未定義語） \\
		   一（いち）/手 一（いち）/局 \\
		   万（まん）/国旗
	\end{itemize}
       \end{quote}

 \item とりあえず採用したが？のもの
       \begin{quote}
	\begin{itemize}
	 \item[例）] 添え
	\end{itemize}
       \end{quote}
\end{itemize}

２文字の「〜長」「〜員」などは採用したが，関係解析などで「〜」を独立さ
せたい場合もあり，今後検討する．
       \begin{quote}
	\begin{itemize}
	 \item[例）] （経理）部長 （駒ヶ根）署員 （民主）党員
	\end{itemize}
       \end{quote}

動詞についてはまだ整理が不十分である．
       \begin{quote}
	\begin{itemize}
	 \item[例）] 取り外す 取り付ける などは採用している．しかし，
		   可能形（取り外せる）はなく，2語に分割される．
	\end{itemize}
       \end{quote}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{自立語辞書の基本formatの整理}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

表記バリエーションとコストの扱い，それらの例外処理，代表表記，種々のコ
メントなどを一元的に管理できるように，自立語辞書の基本formatを定め，
JUMAN辞書はそこから自動生成することとした．

表記バリエーションはJUMAN3.0以降自動生成していたが，例外処理などは，そ
の結果に対してフィルタを用意しており，若干不透明であった．

また，表記バリエーション・代表表記の整理は今回新たに行ったものである．

この基本formatについては，ドキュメントを整理中であり，別の機会に発表す
る予定である．また，基本formatのデータについては現在のところ公開してい
ない．


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\subsubsection{表記バリエーションの整理}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

同じ語の表記バリエーションであることを扱うために，代表表記を設定し，こ
れを意味情報（の一部）として出力することとした(-e2オプション)．

解析例）
\begin{quote}
{\baselineskip = 1.0 \baselineskip
\begin{verbatim}
% cat sample.txt
子どもはリンゴがすきだ
かぜでおくれた

% juman -B -e2 < sample.txt
子ども こども 子ども 名詞 6 普通名詞 1 * 0 * 0 "代表表記:子供"
は は は 助詞 9 副助詞 2 * 0 * 0 NIL
リンゴ りんご リンゴ 名詞 6 普通名詞 1 * 0 * 0 "代表表記:林檎"
が が が 助詞 9 格助詞 1 * 0 * 0 NIL
すきだ すきだ すきだ 形容詞 3 * 0 ナ形容詞 21 基本形 2 "代表表記:好きだ"
EOS
かぜ かぜ かぜ 名詞 6 普通名詞 1 * 0 * 0 "漢字読み:訓 代表表記:風"
@ かぜ かぜ かぜ 名詞 6 普通名詞 1 * 0 * 0 "代表表記:風邪"
で で で 助詞 9 格助詞 1 * 0 * 0 NIL
おくれた おくれた おくれる 動詞 2 * 0 母音動詞 1 タ形 8 "可能動詞 代表表記:送れる"
@ おくれた おくれた おくれる 動詞 2 * 0 母音動詞 1 タ形 8 "代表表記:遅れる"
EOS
\end{verbatim}
}
\end{quote}

これによって，日本語処理の（初期段階における）最大の問題である表記揺れ
の問題を，形態素解析を行うだけである程度取り除くことが可能となる．

また，平仮名書き等による曖昧性も，適切な範囲で複数の可能性（代表表記）
を挙げるようにしており，以後の構文解析・意味解析などへの適切な入力を提
供することができる（上記の「かぜ」の例など）．

これらの整理は，不必要な大規模語彙について機械的に行っているのではなく，
基本語彙について注意深く行っている．そのため，情報検索においても，形態
素解析結果の代表表記のマッチングとすることで適合率・再現率を向上させる
ことが期待できる．


この枠組みの中では，次のような現象を扱っている．

\paragraph{漢字と平仮名，送り仮名} \ 

漢字とするか平仮名とするか，また，送り仮名のバリエーション．その組み合わせ．
(※JUMAN3.0から扱っているが，代表表記を設け，再整理した)  
       \begin{quote}
	\begin{itemize}
	 \item[例）] 拳銃 けん銃 拳じゅう けんじゅう \\
		   表す 表わす あらわす \\
		   落とす 落す おとす
	\end{itemize}
       \end{quote}

基本的なアルゴリズムは以下のとおり．
\begin{itemize}
 \item 名詞，ナ形容詞以外はすべてのバリエーションを作り，コスト（ペナルティ）はない．
 \item 名詞，ナ形容詞は（完全平仮名表記以外で）小学1〜3年生学習漢字を平仮名書き
  する表記は作らない．また，漢字を平仮名書きした表記にはコストを与える．
 \item 漢字１字＋平仮名１字の表記は（平仮名部分のもとの漢字が常用漢字であれ
  ば）ほとんど使われず，副作用のもとなので作らない
       \begin{quote}
	\begin{itemize}
	 \item[例）] 開き（開基） 合い（合意） 厚み（厚身）
	\end{itemize}
       \end{quote}
\end{itemize}

\paragraph{漢字別表記} \ 

       \begin{quote}
	\begin{itemize}
	 \item[例）] 狩人／猟人 朝日／旭 \\
		   色取る／彩る 哀れむ／憐れむ \\
		   綺麗だ／奇麗だ 気掛りだ／気懸かりだ 
	\end{itemize}
       \end{quote}

動詞でどこまでまとめるかは微妙な問題であり，一般の国語辞典などでは意味
の一致の観点からはまとめすぎである．例えば「下りる/降りる」「下ろす/降
ろす」はまとめないこととした．


\paragraph{カタカナ表記のバリエーション} \ 

ソフトウェアとソフトウエアのようなカタカナ表記のバリエーションに対して
も代表表記を設けた．これは，カタカナ語のコーパス中の出現頻度をもとに，
表記バリエーションの自動認識と複合語の自動分割を行い，その結果を人手で
チェックして整理した．


\paragraph{日本語固有語のカタカナ表記} \ 

動物，植物，食べ物などで，日本語固有語であってもカタカナ表記されるもの
について，代表表記のもとに整理した．
       \begin{quote}
	\begin{itemize}
	 \item[例）] 大根 だいこん ダイコン \\
		   餃子 ぎょうざ ギョウザ ギョーザ(最後はカタカナ表記バリエーション)
	\end{itemize}
       \end{quote}

上記のカテゴリに関わらず，カタカナ表記があるものをまとめた
       \begin{quote}
	\begin{itemize}
	 \item[例）] 溝 ミゾ みぞ \\
		   眼鏡 メガネ めがね \\
		   奴 ヤツ やつ
	\end{itemize}
       \end{quote}

代表表記は，原則として，新聞記事での高頻度表記としたが，この選択には強
いこだわりはない（妥当性を主張するものではない）．重要なことは，同じ語
の表記集合がまとめられ，これを通してテキストマッチングなどが適切に行わ
れることであり，代表表記はこの集合のIDの役割を果たすものである．しかし，
IDを数字などにすることは人間にとって管理しやすいものではないので高頻度
の表記を採用した．ただし，現在の代表表記はIDとして一意性を持つものでは
なく，これについては今後さらに整理する予定である．

なお，読みが複数ある漢字表記に対しては現時点では何も特別な扱いはしてい
ない．
       \begin{quote}
	\begin{itemize} 
	 \item[例）] 「旅客機／りょかくき」と「旅客機／りょかっき」は別
		   見出し語 \\
		   ※ただし代表表記はともに旅客機
	\end{itemize}
       \end{quote}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{読みの音訓の情報の付与}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

常用漢字1文字の見出し語に対して読みの音，訓の情報を与えた．

JUMANでは複数の読みを出すが，KNPの最初で，独立の名詞，最初の名詞は訓読
み，名詞に続く名詞は音読みを選択することで，大部分の読みは正しく扱える
（この原則で対応できない場合は，一部，複合語として見出し語とした）．

      \begin{quote}
	\begin{itemize} 
	 \item[例）] 運動場（じょう），救急車（しゃ），自由米（まい）
	\end{itemize}
      \end{quote}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\subsubsection{「読ます」の形の使役，「読ませる」の形の使役受身への対応}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%                      

「す」「さす」という動詞性接尾辞を作り対応した．

\begin{quote}
{\baselineskip = 1.0 \baselineskip
\begin{verbatim}
解析例）
読ま よま 読む 動詞 2 * 0 子音動詞マ行 9 未然形 3 "代表表記:読む"
す す す 接尾辞 14 動詞性接尾辞 7 子音動詞サ行 5 基本形 2 NIL
EOS
読ま よま 読む 動詞 2 * 0 子音動詞マ行 9 未然形 3 "代表表記:読む"
さ さ す 接尾辞 14 動詞性接尾辞 7 子音動詞サ行 5 未然形 3 NIL
れる れる れる 接尾辞 14 動詞性接尾辞 7 母音動詞 1 基本形 2 NIL
EOS
知ら しら 知る 動詞 2 * 0 子音動詞ラ行 10 未然形 3 "代表表記:知る"
す す す 接尾辞 14 動詞性接尾辞 7 子音動詞サ行 5 基本形 2 NIL
EOS
知ら しら 知る 動詞 2 * 0 子音動詞ラ行 10 未然形 3 "代表表記:知る"
さ さ す 接尾辞 14 動詞性接尾辞 7 子音動詞サ行 5 未然形 3 NIL
れる れる れる 接尾辞 14 動詞性接尾辞 7 母音動詞 1 基本形 2 NIL
EOS
\end{verbatim}
}
\end{quote}

以下，判断基準等の詳細

\begin{itemize}
 \item 「読ます」は「読ま＋す（接尾辞）」とする．「読ま＋せる（接尾辞）」に近い．
「〜＋さ＋れる」とよく使うのはこれに相当する場合が多い．

 \item 「驚かす」「怒らす」「悩ます」「喜ばす」「悲します」など「人を〜」のも
のも二語にする．

 \item 「知らす」「聞かす」も二語，ただし「知らせる」は使役度が極めて低く「伝
える」に近いので一語としておく．

 \item 「励ます」は「励ませる」の意味と「元気づける」の意味があるが，後者が
majorなので，一語とする．

 \item 人が関係しない「乾かす」「（たばこ・大臣風を）吹かす」などは一語とする．
「（肩を）いからす」も一語とするが，漢字表記の「怒らす」は「おこらす
（二語）」への副作用があるのでやめる．

 \item 「（飛行機を）飛ばす」「（心を）踊らす」は一語とし，「人を飛ばす・踊ら
す」は（本来二語としたいが）あきらめる．逆に，「働かす」は普通人なので
二語とし，「頭を働かす」はあきらめる．
\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{JUMAN 5.0 からJUMAN 5.1への拡張点}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\label{subsec:5.1}

\begin{enumerate}
\item 従来KNPで付与していた語の意味情報をJUMANで付与することに変更．
      (付属動詞候補，補文ト，〜を〜に構成語 など)

\item プログラムでの変数定義の修正 (MacOS Xでの問題解消)

\item 実行時のデフォルトのオプションを -B -e2 に変更

\item 辞書・接続表の若干の修正
\end{enumerate}


\end{document}
